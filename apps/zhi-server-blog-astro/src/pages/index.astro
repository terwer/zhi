---
import Layout from "@astroBlog/src/layouts/vdoing/Layout.astro"
import ZhiBlogAstroUtil from "../utils/zhiBlogAstroUtil"

const blogApi = ZhiBlogAstroUtil.blogApi()
const posts = await blogApi.getRecentPosts(10)
---

<Layout title="Welcome to index.">
  <main>
    <h1>Welcome to <span class="text-gradient">Astro</span></h1>
    {
      (
        <section>
          <h1>List of posts</h1>
          {posts.map((post: any) => (
            <article>
              <h2>
                <a href={`/post/${post.postid}.html`} set:html={post.title} />
              </h2>
            </article>
          ))}
        </section>
      )
    }
  </main>
</Layout>
